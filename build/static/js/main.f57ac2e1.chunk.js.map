{"version":3,"sources":["CameraInfo.js","ProgressBox.js","Timer.js","SubjectInfo.js","IndexBox.js","App.js","index.js"],"names":["Option","CameraInfo","props","state","time","Date","this","timerID","setInterval","tick","clearInterval","setState","info","movement","people_count","deviceNames","activeDevice","connection","lan","options","Array","isArray","name","push","value","type","justify","align","xs","sm","md","lg","xl","size","column","Items","label","dropdownMatchSelectWidth","defaultValue","onChange","handleDeviceChange","loading","toLocaleString","Component","ProgressBox","progress","className","span","percent","status","strokeColor","showInfo","strokeWidth","Timer","startTimer","timerOn","timerStart","now","timerTime","timer","stopTimer","resetTimer","bind","nextProps","opt","threshold","seconds","Math","floor","slice","minutes","hours","allSeconds","count","SubjectInfo","handleThresholdChange","pose","timerOpt","newPose","mock","marks","0","33","67","100","gutter","src","alt","title","step","tooltipVisible","IndexBox","heartURL","breathURL","ECGURL","heart","breath","heartPulse","breathPulse","duration","spy","forever","offset","Header","Footer","Content","App","checkDataValidity","data","length","infiniteFetch","ticker","initHeaders","Headers","append","init","headers","console","log","fetch","then","res","json","index","i","deviceName","_name","catch","e","people","deviceId","goneWarningLevel","deviceLocalIp","totalPeopleNumber","isGettingSignal","peopleGone","_t","rotateAngle","_strTime","movementLevel","changeLanguage","cameraInfo","heartRate","breathRate","onClick","style","marginTop","textAlign","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f57ac2e1.chunk.js","sourcesContent":["import { Row, Col, Descriptions, Select } from \"antd\";\r\nimport React, { Component } from \"react\";\r\n\r\nconst {Option} = Select;\r\n\r\nclass CameraInfo extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttime: new Date()\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.timerID = setInterval(() => this.tick(), 1000);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.timerID);\r\n\t}\r\n\r\n\ttick() {\r\n\t\tthis.setState({\r\n\t\t\ttime: new Date()\r\n\t\t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst { movement, people_count, activeDevice, deviceNames, connection } = this.props.info;\r\n\t\tconst lan = this.props.lan;\r\n\t\tconst options = [];\r\n\t\tif(Array.isArray(deviceNames)){\r\n\t\t\tfor(let name of deviceNames){\r\n\t\t\t\toptions.push(<Option value={name}>{name}</Option>);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Row type=\"flex\" justify=\"space-between\" align=\"middle\">\r\n\t\t\t\t\t<Col xs={24} sm={10} md={10} lg={8} xl={7}>\r\n\t\t\t\t\t\t<Descriptions size={\"small\"} column={1}>\r\n\t\t\t\t\t\t\t<Descriptions.Items\r\n\t\t\t\t\t\t\t\tlabel={lan == \"en\" ? \"Movement Detection\" : \"运动检测\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{movement == \"static\"\r\n\t\t\t\t\t\t\t\t\t? (lan == \"en\"\r\n\t\t\t\t\t\t\t\t\t\t? \"static\"\r\n\t\t\t\t\t\t\t\t\t\t: \"静止\")\r\n\t\t\t\t\t\t\t\t\t: (movement == \"fretting\"\r\n\t\t\t\t\t\t\t\t\t? (lan == \"en\"\r\n\t\t\t\t\t\t\t\t\t\t? \"fretting\"\r\n\t\t\t\t\t\t\t\t\t\t: \"微动\")\r\n\t\t\t\t\t\t\t\t\t: (movement =='moving'\r\n\t\t\t\t\t\t\t\t\t? (lan == \"en\"\r\n\t\t\t\t\t\t\t\t\t? \"moving\"\r\n\t\t\t\t\t\t\t\t\t: \"移动\")\r\n\t\t\t\t\t\t\t\t  :'--'))}\r\n\t\t\t\t\t\t\t</Descriptions.Items>\r\n\t\t\t\t\t\t\t<Descriptions.Items\r\n\t\t\t\t\t\t\t\tlabel={lan == \"en\" ? \"Number of People\" : \"人数\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{people_count}\r\n\t\t\t\t\t\t\t</Descriptions.Items>\r\n\t\t\t\t\t\t</Descriptions>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col md={4} lg={10} xl={12}/>\r\n\t\t\t\t\t<Col xs={24} sm={12} md={10} lg={6} xl={5}>\r\n\t\t\t\t\t\t<Descriptions size={'small'} column={1}>\r\n\t\t\t\t\t\t\t<Descriptions.Items\r\n\t\t\t\t\t\t\t\tlabel={lan == \"en\" ? \"Device Name\" : \"设备名\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select dropdownMatchSelectWidth={false} defaultValue={'--'} size = {'small'} onChange={this.props.handleDeviceChange} loading={!connection}>\r\n\t\t\t\t\t\t\t  {options}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t</Descriptions.Items>\r\n\t\t\t\t\t\t\t<Descriptions.Items label={lan == \"en\" ? \"Time\" : \"时间\"}>\r\n\t\t\t\t\t\t\t\t{this.state.time.toLocaleString(\r\n\t\t\t\t\t\t\t\t\tlan == \"en\" ? \"en-US\" : \"zh-CN\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Descriptions.Items>\r\n\t\t\t\t\t\t</Descriptions>\r\n\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CameraInfo;\r\n","import React, { Component } from \"react\";\r\nimport { Row, Col, Progress } from \"antd\";\r\n\r\nclass ProgressBox extends Component {\r\n\trender() {\r\n\t\tlet { lan, progress } = this.props;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Row type=\"flex\" justify=\"center\">\r\n\t\t\t\t\t<Col className='text-center'>\r\n\t\t\t\t\t\t{progress == 100 ? (\r\n\t\t\t\t\t\t\t<h2>{lan == \"en\" ? \"Detection complete!\" : \"采集完成！\"}</h2>\r\n\t\t\t\t\t\t) : progress == 0 ? (\r\n\t\t\t\t\t\t\t<h2>{lan == \"en\" ? \"No available subject\" : \"未发现采集对象\"}</h2>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t\t{lan == \"en\" ? \"Detecting rates\" : \"采集信号中\"}\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row type=\"flex\" justify=\"center\">\r\n\t\t\t\t\t<Col span={20}>\r\n\t\t\t\t\t\t<Progress\r\n\t\t\t\t\t\t\tpercent={progress == 0 ? 100 : progress}\r\n\t\t\t\t\t\t\tstatus={\r\n\t\t\t\t\t\t\t\tprogress == 0\r\n\t\t\t\t\t\t\t\t\t? \"normal\"\r\n\t\t\t\t\t\t\t\t\t: progress == 100\r\n\t\t\t\t\t\t\t\t\t? \"success\"\r\n\t\t\t\t\t\t\t\t\t: \"active\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstrokeColor={progress == 0 ? \"#dbd9d9\" : \"\"}\r\n\t\t\t\t\t\t\tshowInfo={progress == 0 ? false : true}\r\n\t\t\t\t\t\t\tstrokeWidth={20}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row type=\"flex\" justify=\"center\">\r\n\t\t\t\t\t<Col className='text-center'>\r\n\t\t\t\t\t\t{progress == 100 ? (\r\n\t\t\t\t\t\t\t<h3>{lan == \"en\" ? \"See result below\" : \"以下为检测结果\"}</h3>\r\n\t\t\t\t\t\t) : progress == 0 ? (\r\n\t\t\t\t\t\t\t<h3>{\"\"}</h3>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<h3>{lan == \"en\" ? \"Please stay still\" : \"请保持不动\"}</h3>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ProgressBox;\r\n","import React, { Component } from \"react\";\r\nimport { Row,Col,Button, Badge } from \"antd\";\r\n\r\nclass Timer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttimerOn: false,\r\n\t\t\ttimerStart: 0,\r\n\t\t\ttimerTime: 0,\r\n\t\t};\r\n\t\tthis.startTimer = this.startTimer.bind(this);\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tlet { opt, threshold } = nextProps;\r\n\t\tif (opt == \"start\") {\r\n\t\t\tthis.startTimer();\r\n\t\t} else if (opt == \"reset\") {\r\n\t\t\tthis.resetTimer();\r\n\t\t} else if (opt == \"stop\") {\r\n\t\t\tthis.stopTimer();\r\n\t\t\tthis.resetTimer();\r\n\t\t}\r\n\t}\r\n\tstartTimer = () => {\r\n\t\tthis.setState({\r\n\t\t\ttimerOn: true,\r\n\t\t\ttimerStart: Date.now() - this.state.timerTime\r\n\t\t});\r\n\t\tthis.timer = setInterval(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttimerTime: Date.now() - this.state.timerStart\r\n\t\t\t});\r\n\t\t}, 10);\r\n\t};\r\n\r\n\tstopTimer = () => {\r\n\t\tthis.setState({ timerOn: false });\r\n\t\tclearInterval(this.timer);\r\n\t};\r\n\r\n\tresetTimer = () => {\r\n\t\tthis.setState({\r\n\t\t\ttimerStart: Date.now(),\r\n\t\t\ttimerTime: 0\r\n\t\t});\r\n\t};\r\n\trender() {\r\n\t\tconst { timerTime } = this.state;\r\n\t\tlet centiseconds = (\"0\" + (Math.floor(timerTime / 10) % 100)).slice(-2);\r\n\t\tlet seconds = (\"0\" + (Math.floor(timerTime / 1000) % 60)).slice(-2);\r\n\t\tlet minutes = (\"0\" + (Math.floor(timerTime / 60000) % 60)).slice(-2);\r\n\t\tlet hours = (\"0\" + Math.floor(timerTime / 3600000)).slice(-2);\r\n\t\tlet allSeconds= (Math.floor(timerTime / 1000));\r\n\t\treturn (\r\n\t\t\t(this.props.threshold==null||allSeconds<this.props.threshold)?\r\n\t\t\t<div className=\"stopWatch\">\r\n\t\t\t\t{hours}:{minutes}:{seconds}\r\n\t\t\t</div>\r\n\t\t\t:\r\n\t\t\t<Row type='flex' align='middle'>\r\n\t\t\t  <Col span={2}>\r\n\t\t\t\t<Badge\r\n\t\t\t\tcount={'!'}\r\n\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span={22}>\r\n\t\t\t\t  {`${minutes}:${minutes}:${seconds}`}\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Timer;\r\n","import React, { Component } from \"react\";\r\nimport { Row, Col, Descriptions, Slider,Divider } from \"antd\";\r\nimport ProgressBox from \"./ProgressBox.js\";\r\nimport Timer from \"./Timer.js\";\r\n\r\nclass SubjectInfo extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpose: null,\r\n\t\t\ttimerOpt: null,\r\n\t\t\tthreshold:null,\r\n\t\t};\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tlet pose = this.state.pose;\r\n\t\tlet newPose = nextProps.pose;\r\n\t\t// console.log(`newPose:${newPose}, pose:${pose}`);\r\n\t\tif (newPose == null) {\r\n\t\t\tthis.setState({ timerOpt: \"stop\",pose:newPose });\r\n\t\t} else if (pose==null) {\r\n\t\t\tthis.setState({ timerOpt: \"start\",pose:newPose});\r\n\t\t}else if(pose==newPose){\r\n\t\t\tthis.setState({ timerOpt: \"keep\" });\r\n\t\t}else{\r\n\t\t\tthis.setState({ timerOpt: \"reset\",pose:newPose });\r\n\t\t}\r\n\t}\r\n\r\n\thandleThresholdChange=(value)=>{\r\n\t\tlet threshold;\r\n\t\tswitch(value){\r\n\t\t\tcase 0:threshold=60;break;\r\n\t\t\tcase 33:threshold=120;break;\r\n\t\t\tcase 67:threshold=180;break;\r\n\t\t\tcase 100:threshold=null;break;\r\n\t\t\tdefault: threshold=null;\r\n\t\t}\r\n\t\tthis.setState({threshold});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst mock = {\r\n\t\t\tstandURL:\r\n\t\t\t\t\"/resources/stand.png\",\r\n\t\t\tsitURL: \"/resources/sit.svg\",\r\n\t\t\tsleepURL: \"https://image.flaticon.com/icons/svg/55/55181.svg\",\r\n\t\t\tlieURL: \"/resources/lie.svg\",\r\n\t\t\tgroundURL: \"https://i.dlpng.com/static/png/6852377_preview.png\",\r\n\t\t\tloadingURL:\r\n\t\t\t\t\"https://media1.tenor.com/images/1c5800d6abb603cb52e8ab3bbd710af1/tenor.gif?itemid=14907829\"\r\n\t\t};\r\n\t\tlet { lan, progress, pose } = this.props;\r\n\t\tconst marks={\r\n\t\t\t0:'1',\r\n\t\t\t33:'2',\r\n\t\t\t67:'3',\r\n\t\t\t100:lan==='en'?'N/A':'不报警'\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Row type=\"flex\" align=\"middle\" gutter={0}>\r\n\t\t\t\t\t<Col xs={10} sm={7} md={3}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\tpose === \"stand\"\r\n\t\t\t\t\t\t\t\t\t? mock.standURL\r\n\t\t\t\t\t\t\t\t\t: pose === \"sit\"\r\n\t\t\t\t\t\t\t\t\t? mock.sitURL\r\n\t\t\t\t\t\t\t\t\t: pose === \"lie\"\r\n\t\t\t\t\t\t\t\t\t? mock.lieURL\r\n\t\t\t\t\t\t\t\t\t: mock.loadingURL\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\talt=\"posture-img\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={14} sm={17} md={5}>\r\n\t\t\t\t\t\t<Descriptions\r\n\t\t\t\t\t\t\ttitle={lan == \"en\" ? \"Subject Info\" : \"被测人信息\"}\r\n\t\t\t\t\t\t\tcolumn={1}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Descriptions.Items label={lan == \"en\" ? \"Posture\" : \"动作\"}>\r\n\t\t\t\t\t\t\t\t{pose==null?'--':(lan=='en'?pose:\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\tpose=='stand'?'站':\r\n\t\t\t\t\t\t\t\t\tpose=='sit'?'坐或蹲':'坐地上或躺'\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Descriptions.Items>\r\n\t\t\t\t\t\t\t<Descriptions.Items label={lan == \"en\" ? \"Duration\" : \"时长\"}>\r\n\t\t\t\t\t\t\t\t<Timer opt={this.state.timerOpt} threshold={this.state.threshold} />\r\n\t\t\t\t\t\t\t</Descriptions.Items>\r\n\t\t\t\t\t\t</Descriptions>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t  <Col xs={15} sm={10} md={22} lg={20} xl={18}>\r\n\t\t\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\t\tstep={null}\r\n\t\t\t\t\t\t\t\tmarks={marks}\r\n\t\t\t\t\t\t\t\tdefaultValue={100}\r\n\t\t\t\t\t\t\t\tonChange={this.handleThresholdChange}\r\n\t\t\t\t\t\t\t\ttooltipVisible={false}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={24} md={15} lg={16}>\r\n\t\t\t\t\t\t<ProgressBox lan={lan} progress={progress} />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SubjectInfo;\r\n","import React, { Component } from \"react\";\r\nimport { Row, Col, Descriptions } from \"antd\";\r\nimport Pulse from \"react-reveal/Pulse\";\r\n\r\nclass IndexBox extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\theartURL:\r\n\t\t\t\t\"/resources/heart.svg\",\r\n\t\t\tbreathURL: \"/resources/lung.png\",\r\n\t\t\tECGURL: \"https://media.giphy.com/media/abTqsmCYAgGzu/giphy.gif\",\r\n\t\t\theart:0,\r\n\t\t\tbreath:0,\r\n\t\t\theartPulse:0,\r\n\t\t\tbreathPulse:0,\r\n\t\t}\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps){\r\n\t\tlet { heart, breath } = nextProps;\r\n\t\theart = (heart==-1)?0:heart;\r\n\t\tbreath = (breath==-1)?0:breath;\r\n\t\tlet heartPulse = 60000 / heart;\r\n\t\tlet breathPulse =  60000 / breath;\r\n\t\tthis.setState({\r\n\t\t\theart,\r\n\t\t\tbreath,\r\n\t\t\theartPulse,\r\n\t\t\tbreathPulse\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { lan } = this.props;\r\n\t\tlet {heart,breath,heartPulse,breathPulse} = this.state;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Row type=\"flex\" align=\"middle\" justify=\"space-between\">\r\n\t\t\t\t\t<Col xs={24} sm={20} md={9}>\r\n\t\t\t\t\t\t<Row type=\"flex\" align=\"middle\" gutter={[0, 80]}>\r\n\t\t\t\t\t\t\t<Col span={7}>\r\n\t\t\t\t\t\t\t<Pulse duration={heartPulse} spy={heartPulse} forever>\r\n\t\t\t\t\t\t\t\t<Pulse duration={heartPulse} spy={heartPulse} forever>\r\n\t\t\t\t\t\t\t\t\t<Pulse duration={heartPulse} spy={heartPulse} forever>\r\n\t\t\t\t\t\t\t\t\t\t<img src={this.state.heartURL} alt=\"heart-img\" />\r\n\t\t\t\t\t\t\t\t\t</Pulse>\r\n\t\t\t\t\t\t\t\t</Pulse>\r\n\t\t\t\t\t\t\t</Pulse>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col span={15} offset={2}>\r\n\t\t\t\t\t\t\t\t<h1>{heart + (lan === \"en\" ? \"b/min\" : \"次/分钟\")}</h1>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row type=\"flex\" align=\"middle\" gutter={[0, 40]}>\r\n\t\t\t\t\t\t\t<Col span={7}>\r\n\t\t\t\t\t\t\t\t<Pulse duration={breathPulse} spy={breathPulse} forever>\r\n\t\t\t\t\t\t\t\t\t<Pulse duration={breathPulse} spy={breathPulse} forever>\r\n\t\t\t\t\t\t\t\t\t\t<Pulse duration={breathPulse} spy={breathPulse} forever>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={this.state.breathURL} alt=\"breath-img\" />\r\n\t\t\t\t\t\t\t\t\t\t</Pulse>\r\n\t\t\t\t\t\t\t\t\t</Pulse>\r\n\t\t\t\t\t\t\t\t</Pulse>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col span={15} offset={2}>\r\n\t\t\t\t\t\t\t\t<h1>{breath + (lan === \"en\" ? \"r/min\" : \"次/分钟\")}</h1>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={24} md={15} className='text-right'>\r\n\t\t\t\t\t\t<img src={heart == 0 ? '/resources/plain-line-green.png' : '/resources/ECG-green.png'} alt={\"ecg img\"} />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default IndexBox;\r\n","import React, { Component } from \"react\";\r\nimport { Layout, Row, Col, Divider } from \"antd\";\r\nimport CameraInfo from \"./CameraInfo\";\r\nimport { Button } from \"antd\";\r\nimport SubjectInfo from \"./SubjectInfo.js\";\r\nimport IndexBox from \"./IndexBox.js\";\r\n\r\n\r\nconst { Header, Footer, Content } = Layout;\r\n\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdata: {\r\n\t\t\t\tpeople: [\r\n\t\t\t\t],\r\n\t\t\t\tdeviceId: \"--\",\r\n\t\t\t\tgoneWarningLevel: 0,\r\n\t\t\t\tdeviceLocalIp: \"192.168.7.16\",\r\n\t\t\t\ttotalPeopleNumber: 0,\r\n\t\t\t\tisGettingSignal: 0,\r\n\t\t\t\tpeopleGone: [\r\n\t\t\t\t],\r\n\t\t\t\t_t: 1575260796.561986,\r\n\t\t\t\trotateAngle: 0,\r\n\t\t\t\t_strTime: \"2019-12-02 12:26:36\",\r\n\t\t\t\tmovementLevel: null\r\n\t\t\t},\r\n\t\t\tlan: \"en\",\r\n\t\t\tactiveDevice:null,\r\n\t\t\tdeviceNames:[],\r\n\t\t\tconnection:false,\r\n\t\t};\r\n\t\tthis.changeLanguage = this.changeLanguage.bind(this);\r\n\t}\r\n\r\n\tchangeLanguage() {\r\n\t\tif (this.state.lan == \"en\") {\r\n\t\t\tthis.setState({ lan: \"zh\" });\r\n\t\t} else {\r\n\t\t\tthis.setState({ lan: \"en\" });\r\n\t\t}\r\n\t}\r\n\t//\r\n\t// sendMockData1= ()=>{\r\n\t// \tthis.setState({\r\n\t// \t\tdata: {\r\n\t// \t\t\tpeople: [\r\n\t// \t\t\t\t{\r\n\t// \t\t\t\t\tbreathWarningLevel: \"GREEN\",\r\n\t// \t\t\t\t\tpose: 'stand',\r\n\t// \t\t\t\t\tposeWarningLevel: \"GREEN\",\r\n\t// \t\t\t\t\tROI: \"default0\",\r\n\t// \t\t\t\t\theartRate: -1,\r\n\t// \t\t\t\t\tbreathRate: -1,\r\n\t// \t\t\t\t\tinfo: \"\",\r\n\t// \t\t\t\t\theartWarningLevel: \"GREEN\"\r\n\t// \t\t\t\t}\r\n\t// \t\t\t],\r\n\t// \t\t\tdeviceId: \"mock01\",\r\n\t// \t\t\tgoneWarningLevel: 0,\r\n\t// \t\t\tdeviceLocalIp: \"192.168.7.16\",\r\n\t// \t\t\ttotalPeopleNumber: 1,\r\n\t// \t\t\tisGettingSignal: 120,\r\n\t// \t\t\tpeopleGone: [\r\n\t// \t\t\t\t{\r\n\t// \t\t\t\t\tROI2_ID: \"blindSpot0\",\r\n\t// \t\t\t\t\tgoneTime: 1204.707\r\n\t// \t\t\t\t}\r\n\t// \t\t\t],\r\n\t// \t\t\t_t: 1575260796.561986,\r\n\t// \t\t\trotateAngle: 0,\r\n\t// \t\t\t_strTime: \"2019-12-02 12:26:36\",\r\n\t// \t\t\tmovementLevel: 5\r\n\t// \t\t},\r\n\t// \t\tdeviceNames:['mock01','mock02'],\r\n\t// \t\tconnection:true,\r\n\t// \t})\r\n\t// }\r\n\t//\r\n\t// sendMockData2= ()=>{\r\n\t// \tthis.setState({\r\n\t// \t\tdata:{\r\n\t//         \"_t\": 1575427374.026184,\r\n\t//         \"deviceId\": \"mock02\",\r\n\t//         \"people\": [],\r\n\t//         \"goneWarningLevel\": 0,\r\n\t//         \"_strTime\": \"2019-12-04 10:42:54\",\r\n\t//         \"totalPeopleNumber\": 0,\r\n\t//         \"peopleGone\": [\r\n\t//             {\r\n\t//                 \"ROI2_ID\": \"blindSpot0\",\r\n\t//                 \"goneTime\": 1.563\r\n\t//             }\r\n\t//         ],\r\n\t//         \"rotateAngle\": 0,\r\n\t//         \"deviceLocalIp\": \"192.168.7.16\",\r\n\t//         \"isGettingSignal\": 0\r\n\t//     },\r\n\t// \t\tdeviceNames:[],\r\n\t// \t\tconnection:false,\r\n\t//\r\n\t// \t})\r\n\t// }\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.infiniteFetch();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.ticker);\r\n\t}\r\n\r\n\tcheckDataValidity = (data)=>{\r\n\t\tif(data.length==0){\r\n\t\t\treturn false;\r\n\t\t}else return true;\r\n\t}\r\n\r\n\thandleDeviceChange = (activeDevice)=>{\r\n\t\tthis.setState({activeDevice});\r\n\t}\r\n\r\n\tinfiniteFetch = () => {\r\n\t\tthis.ticker = setInterval(() => {\r\n\t\t\tlet initHeaders = new Headers();\r\n\t\t\tinitHeaders.append(\"Accept\", \"application/json, text/html, */*\");\r\n\t\t\tinitHeaders.append(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n\t\t\tconst init = {\r\n\t\t\t\t// method:'GET',\r\n\t\t\t\theaders: initHeaders\r\n\t\t\t\t// cache:'default',\r\n\t\t\t};\r\n\t\t\tconsole.log(\"start fetching\");\r\n\t\t\tfetch(\r\n\t\t\t\t\"http://www.utdimensions.com:5005/check_newest_jsonstr?deviceId=all\",\r\n\t\t\t\tinit\r\n\t\t\t)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\treturn res.json();\r\n\t\t\t\t})\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tif(!this.checkDataValidity(data))return;\r\n\t\t\t\t\tlet activeDevice = this.state.activeDevice;\r\n\t\t\t\t\t\t//pick the first device if not specifically named\r\n\t\t\t\t\tlet deviceNames = [];\r\n\t\t\t\t\tlet index = 0;\r\n\t\t\t\t\tlet connection =false;\r\n\t\t\t\t\tfor(let i=0;i<data.length;i++){\r\n\t\t\t\t\t\tlet deviceName=data[i]._name;\r\n\t\t\t\t\t\tdeviceNames.push(deviceName);\r\n\t\t\t\t\t\tif(deviceName==activeDevice){\r\n\t\t\t\t\t\t\tindex=i;\r\n\t\t\t\t\t\t\tconnection=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// auto select active device\r\n\t\t\t\t\t// this.setState({data:data[index],deviceNames,activeDevice:deviceNames[index]});\r\n\t\t\t\t\tif(connection){\r\n\t\t\t\t\t\tthis.setState({data:data[index],deviceNames,connection});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {this.setState({deviceNames});}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => console.log(e));\r\n\t\t}, 3000);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst tsIcon =\r\n\t\t\t\"https://images.unsplash.com/photo-1436473849883-bb3464c23e93?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80\";\r\n\t\tconst mock = {\r\n\t\t\tlogoURL: \"http://utdimensions.com/LOGO256-1.d88fd1a0.png\"\r\n\t\t};\r\n\t\tlet movement =\r\n\t\t\t\tthis.state.data.movementLevel==null\r\n\t\t\t\t?\"--\"\r\n\t\t\t\t:this.state.data.movementLevel < 5\r\n\t\t\t\t? \"static\"\r\n\t\t\t\t: this.state.data.movementLevel < 5\r\n\t\t\t\t? \"fretting\"\r\n\t\t\t\t: \"moving\";\r\n\t\tlet progress = this.state.data.isGettingSignal / 4;\r\n\t\tlet people_count = this.state.data.people.length;\r\n\t\tlet { activeDevice,deviceNames,connection } = this.state;\r\n\t\tlet cameraInfo = {\r\n\t\t\tmovement,\r\n\t\t\tactiveDevice,\r\n\t\t\tdeviceNames,\r\n\t\t\tpeople_count,\r\n\t\t\tconnection\r\n\t\t};\r\n\t\tif(people_count>0){\r\n\t\t\tvar { pose, heartRate, breathRate } = this.state.data.people[0];\r\n\t\t}else {\r\n\t\t\tvar pose = null;\r\n\t\t\tvar heartRate = -1;\r\n\t\t\tvar breathRate = -1;\r\n\t\t}\r\n\t\tprogress = (heartRate!=-1?100:\r\n\t\t\t(\r\n\t\t\t\tbreathRate!=-1?100:progress\r\n\t\t\t));\r\n\t\tlet lan = this.state.lan;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<Header className=\"spaceDown\">\r\n\t\t\t\t\t\t<Row type=\"flex\" align=\"middle\">\r\n\t\t\t\t\t\t\t<Col xs={4} sm={2} md={2} lg={1} xl={1} offset={1}>\r\n\t\t\t\t\t\t\t\t<img src={mock.logoURL} alt=\"logo\" />\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col xs={15} sm={18} lg={20}/>\r\n\t\t\t\t\t\t\t<Col span={2}>\r\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={this.changeLanguage}>\r\n\t\t\t\t\t\t\t\t{this.state.lan == \"en\" ? \"中文\" : \"English\"}\r\n\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Header>\r\n\t\t\t\t\t<Content>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col span={20} offset={2}>\r\n\t\t\t\t\t\t\t\t<CameraInfo lan={this.state.lan} info={cameraInfo} handleDeviceChange={this.handleDeviceChange}  />\r\n\t\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t\t<SubjectInfo\r\n\t\t\t\t\t\t\t\t\tlan={this.state.lan}\r\n\t\t\t\t\t\t\t\t\tpose={pose}\r\n\t\t\t\t\t\t\t\t\tprogress={progress}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Divider>\r\n\t\t\t\t\t\t\t\t\t{this.state.lan == \"en\" ? \"Real Time Monitoring\" : \"实时监测\"}\r\n\t\t\t\t\t\t\t\t</Divider>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col span={22}>\r\n\t\t\t\t\t\t\t\t\t\t<IndexBox\r\n\t\t\t\t\t\t\t\t\t\t\tlan={this.state.lan}\r\n\t\t\t\t\t\t\t\t\t\t\theart={heartRate}\r\n\t\t\t\t\t\t\t\t\t\t\tbreath={breathRate}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Content>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<Footer>\r\n\t\t\t\t\t\t<Row type=\"flex\" justify=\"center\" style={{ marginTop: \"-2vh\" }}>\r\n\t\t\t\t\t\t\t<Col style={{ textAlign: \"center\" }} span={22}>\r\n\t\t\t\t\t\t\t\t<p className='tip'>\r\n\t\t\t\t\t\t\t\t\t{this.state.lan == \"en\"\r\n\t\t\t\t\t\t\t\t\t\t? \"United Dimensions Technologies Co., Ltd.\"\r\n\t\t\t\t\t\t\t\t\t\t: \"联合维度（广州）科技有限公司\"}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Footer>\r\n\t\t\t\t</Layout>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}