(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{118:function(e,t,a){e.exports=a(213)},123:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(5),s=a.n(r),i=(a(123),a(124),a(71)),c=(a(47),a(12)),o=(a(127),a(114)),m=(a(48),a(9)),u=a(23),h=a(24),p=a(26),d=a(25),v=a(53),f=a(27),g=(a(129),a(61)),E=(a(91),a(30)),b=(a(214),a(89)),y=b.a.Option,O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={time:new Date},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({time:new Date})}},{key:"render",value:function(){var e=this.props.info,t=e.movement,a=e.people_count,n=(e.activeDevice,e.deviceNames),r=e.connection,s=this.props.lan,i=[];if(Array.isArray(n)){var o=!0,u=!1,h=void 0;try{for(var p,d=n[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var v=p.value;i.push(l.a.createElement(y,{value:v},v))}}catch(f){u=!0,h=f}finally{try{o||null==d.return||d.return()}finally{if(u)throw h}}}return l.a.createElement("div",null,l.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle"},l.a.createElement(m.a,{xs:24,sm:10,md:10,lg:8,xl:7},l.a.createElement(E.a,{size:"small",column:1},l.a.createElement(E.a.Items,{label:"en"==s?"Movement Detection":"\u8fd0\u52a8\u68c0\u6d4b"},"static"==t?"en"==s?"static":"\u9759\u6b62":"fretting"==t?"en"==s?"fretting":"\u5fae\u52a8":"moving"==t?"en"==s?"moving":"\u79fb\u52a8":"--"),l.a.createElement(E.a.Items,{label:"en"==s?"Number of People":"\u4eba\u6570"},a))),l.a.createElement(m.a,{md:4,lg:10,xl:12}),l.a.createElement(m.a,{xs:24,sm:12,md:10,lg:6,xl:5},l.a.createElement(E.a,{size:"small",column:1},l.a.createElement(E.a.Items,{label:"en"==s?"Device Name":"\u8bbe\u5907\u540d"},l.a.createElement(b.a,{dropdownMatchSelectWidth:!1,defaultValue:"--",size:"small",onChange:this.props.handleDeviceChange,loading:!r},i)),l.a.createElement(E.a.Items,{label:"en"==s?"Time":"\u65f6\u95f4"},this.state.time.toLocaleString("en"==s?"en-US":"zh-CN"))))))}}]),t}(n.Component),j=(a(215),a(112)),x=(a(192),a(113)),k=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lan,a=e.progress;return l.a.createElement("div",null,l.a.createElement(c.a,{type:"flex",justify:"center"},l.a.createElement(m.a,{className:"text-center"},100==a?l.a.createElement("h2",null,"en"==t?"Detection complete!":"\u91c7\u96c6\u5b8c\u6210\uff01"):0==a?l.a.createElement("h2",null,"en"==t?"No available subject":"\u672a\u53d1\u73b0\u91c7\u96c6\u5bf9\u8c61"):l.a.createElement("h2",null,"en"==t?"Detecting rates":"\u91c7\u96c6\u4fe1\u53f7\u4e2d"))),l.a.createElement(c.a,{type:"flex",justify:"center"},l.a.createElement(m.a,{span:20},l.a.createElement(x.a,{percent:0==a?100:a,status:0==a?"normal":100==a?"success":"active",strokeColor:0==a?"#dbd9d9":"",showInfo:0!=a,strokeWidth:20}))),l.a.createElement(c.a,{type:"flex",justify:"center"},l.a.createElement(m.a,{className:"text-center"},100==a?l.a.createElement("h3",null,"en"==t?"See result below":"\u4ee5\u4e0b\u4e3a\u68c0\u6d4b\u7ed3\u679c"):0==a?l.a.createElement("h3",null,""):l.a.createElement("h3",null,"en"==t?"Please stay still":"\u8bf7\u4fdd\u6301\u4e0d\u52a8"))))}}]),t}(n.Component),D=(a(194),a(115)),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).startTimer=function(){a.setState({timerOn:!0,timerStart:Date.now()-a.state.timerTime}),a.timer=setInterval((function(){a.setState({timerTime:Date.now()-a.state.timerStart})}),10)},a.stopTimer=function(){a.setState({timerOn:!1}),clearInterval(a.timer)},a.resetTimer=function(){a.setState({timerStart:Date.now(),timerTime:0})},a.state={timerOn:!1,timerStart:0,timerTime:0},a.startTimer=a.startTimer.bind(Object(v.a)(a)),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.opt;e.threshold;"start"==t?this.startTimer():"reset"==t?this.resetTimer():"stop"==t&&(this.stopTimer(),this.resetTimer())}},{key:"render",value:function(){var e=this.state.timerTime,t=(("0"+Math.floor(e/10)%100).slice(-2),("0"+Math.floor(e/1e3)%60).slice(-2)),a=("0"+Math.floor(e/6e4)%60).slice(-2),n=("0"+Math.floor(e/36e5)).slice(-2),r=Math.floor(e/1e3);return null==this.props.threshold||r<this.props.threshold?l.a.createElement("div",{className:"stopWatch"},n,":",a,":",t):l.a.createElement(c.a,{type:"flex",align:"middle"},l.a.createElement(m.a,{span:2},l.a.createElement(D.a,{count:"!"})),l.a.createElement(m.a,{span:22},"".concat(a,":").concat(a,":").concat(t)))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleThresholdChange=function(e){var t;switch(e){case 0:t=60;break;case 33:t=120;break;case 67:t=180;break;case 100:t=null;break;default:t=null}a.setState({threshold:t})},a.state={pose:null,timerOpt:null,threshold:null},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.pose,a=e.pose;null==a?this.setState({timerOpt:"stop",pose:a}):null==t?this.setState({timerOpt:"start",pose:a}):t==a?this.setState({timerOpt:"keep"}):this.setState({timerOpt:"reset",pose:a})}},{key:"render",value:function(){var e="/resources/stand.png",t="/resources/sit.svg",a="/resources/lie.svg",n="https://media1.tenor.com/images/1c5800d6abb603cb52e8ab3bbd710af1/tenor.gif?itemid=14907829",r=this.props,s=r.lan,i=r.progress,o=r.pose,u={0:"1",33:"2",67:"3",100:"en"===s?"N/A":"\u4e0d\u62a5\u8b66"};return l.a.createElement("div",null,l.a.createElement(c.a,{type:"flex",align:"middle",gutter:0},l.a.createElement(m.a,{xs:10,sm:7,md:3},l.a.createElement("img",{src:"stand"===o?e:"sit"===o?t:"lie"===o?a:n,alt:"posture-img"})),l.a.createElement(m.a,{xs:14,sm:17,md:5},l.a.createElement(E.a,{title:"en"==s?"Subject Info":"\u88ab\u6d4b\u4eba\u4fe1\u606f",column:1,size:"small"},l.a.createElement(E.a.Items,{label:"en"==s?"Posture":"\u52a8\u4f5c"},null==o?"--":"en"==s?o:"stand"==o?"\u7ad9":"sit"==o?"\u5750\u6216\u8e72":"\u5750\u5730\u4e0a\u6216\u8eba"),l.a.createElement(E.a.Items,{label:"en"==s?"Duration":"\u65f6\u957f"},l.a.createElement(S,{opt:this.state.timerOpt,threshold:this.state.threshold}))),l.a.createElement(c.a,null,l.a.createElement(m.a,{xs:15,sm:10,md:22,lg:20,xl:18},l.a.createElement(j.a,{step:null,marks:u,defaultValue:100,onChange:this.handleThresholdChange,tooltipVisible:!1})))),l.a.createElement(m.a,{xs:24,md:15,lg:16},l.a.createElement(k,{lan:s,progress:i}))))}}]),t}(n.Component),C=a(46),I=a.n(C),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={heartURL:"/resources/heart.svg",breathURL:"/resources/lung.png",ECGURL:"https://media.giphy.com/media/abTqsmCYAgGzu/giphy.gif",heart:0,breath:0,heartPulse:0,breathPulse:0},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.heart,a=e.breath,n=6e4/(t=-1==t?0:t),l=6e4/(a=-1==a?0:a);this.setState({heart:t,breath:a,heartPulse:n,breathPulse:l})}},{key:"render",value:function(){var e=this.props.lan,t=this.state,a=t.heart,n=t.breath,r=t.heartPulse,s=t.breathPulse;return l.a.createElement("div",null,l.a.createElement(c.a,{type:"flex",align:"middle",justify:"space-between"},l.a.createElement(m.a,{xs:24,sm:20,md:9},l.a.createElement(c.a,{type:"flex",align:"middle",gutter:[0,80]},l.a.createElement(m.a,{span:7},l.a.createElement(I.a,{duration:r,spy:r,forever:!0},l.a.createElement(I.a,{duration:r,spy:r,forever:!0},l.a.createElement(I.a,{duration:r,spy:r,forever:!0},l.a.createElement("img",{src:this.state.heartURL,alt:"heart-img"}))))),l.a.createElement(m.a,{span:15,offset:2},l.a.createElement("h1",null,a+("en"===e?"b/min":"\u6b21/\u5206\u949f")))),l.a.createElement(c.a,{type:"flex",align:"middle",gutter:[0,40]},l.a.createElement(m.a,{span:7},l.a.createElement(I.a,{duration:s,spy:s,forever:!0},l.a.createElement(I.a,{duration:s,spy:s,forever:!0},l.a.createElement(I.a,{duration:s,spy:s,forever:!0},l.a.createElement("img",{src:this.state.breathURL,alt:"breath-img"}))))),l.a.createElement(m.a,{span:15,offset:2},l.a.createElement("h1",null,n+("en"===e?"r/min":"\u6b21/\u5206\u949f"))))),l.a.createElement(m.a,{xs:24,md:15,className:"text-right"},l.a.createElement("img",{src:0==a?"/resources/plain-line-green.png":"/resources/ECG-green.png",alt:"ecg img"}))))}}]),t}(n.Component),L=g.a.Header,N=g.a.Footer,P=g.a.Content,R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).checkDataValidity=function(e){return 0!=e.length},a.handleDeviceChange=function(e){a.setState({activeDevice:e})},a.infiniteFetch=function(){a.ticker=setInterval((function(){var e=new Headers;e.append("Accept","application/json, text/html, */*"),e.append("Content-Type","text/plain;charset=UTF-8");var t={headers:e};console.log("start fetching"),fetch("http://www.utdimensions.com:5005/check_newest_jsonstr?deviceId=all",t).then((function(e){return e.json()})).then((function(e){if(a.checkDataValidity(e)){for(var t=a.state.activeDevice,n=[],l=0,r=!1,s=0;s<e.length;s++){var i=e[s].deviceId;n.push(i),i==t&&(l=s,r=!0)}r?a.setState({data:e[l],deviceNames:n,connection:r}):a.setState({deviceNames:n})}})).catch((function(e){return console.log(e)}))}),3e3)},a.state={data:{people:[],deviceId:"--",goneWarningLevel:0,deviceLocalIp:"192.168.7.16",totalPeopleNumber:0,isGettingSignal:0,peopleGone:[],_t:1575260796.561986,rotateAngle:0,_strTime:"2019-12-02 12:26:36",movementLevel:null},lan:"en",activeDevice:null,deviceNames:[],connection:!1},a.changeLanguage=a.changeLanguage.bind(Object(v.a)(a)),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"changeLanguage",value:function(){"en"==this.state.lan?this.setState({lan:"zh"}):this.setState({lan:"en"})}},{key:"componentDidMount",value:function(){this.infiniteFetch()}},{key:"componentWillUnmount",value:function(){clearInterval(this.ticker)}},{key:"render",value:function(){var e=null==this.state.data.movementLevel?"--":this.state.data.movementLevel<5?"static":this.state.data.movementLevel<5?"fretting":"moving",t=this.state.data.isGettingSignal/4,a=this.state.data.people.length,n=this.state,r={movement:e,activeDevice:n.activeDevice,deviceNames:n.deviceNames,people_count:a,connection:n.connection};if(a>0)var s=this.state.data.people[0],u=s.pose,h=s.heartRate,p=s.breathRate;else u=null,h=-1,p=-1;t=-1!=h?100:-1!=p?100:t;this.state.lan;return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(L,{className:"spaceDown"},l.a.createElement(c.a,{type:"flex",align:"middle"},l.a.createElement(m.a,{xs:4,sm:2,md:2,lg:1,xl:1,offset:1},l.a.createElement("img",{src:"http://utdimensions.com/LOGO256-1.d88fd1a0.png",alt:"logo"})),l.a.createElement(m.a,{xs:15,sm:18,lg:20}),l.a.createElement(m.a,{span:2},l.a.createElement(o.a,{type:"primary",onClick:this.changeLanguage},"en"==this.state.lan?"\u4e2d\u6587":"English")))),l.a.createElement(P,null,l.a.createElement(c.a,null,l.a.createElement(m.a,{span:20,offset:2},l.a.createElement(O,{lan:this.state.lan,info:r,handleDeviceChange:this.handleDeviceChange}),l.a.createElement(i.a,null),l.a.createElement(T,{lan:this.state.lan,pose:u,progress:t}),l.a.createElement(i.a,null,"en"==this.state.lan?"Real Time Monitoring":"\u5b9e\u65f6\u76d1\u6d4b"),l.a.createElement(c.a,null,l.a.createElement(m.a,{span:22},l.a.createElement(w,{lan:this.state.lan,heart:h,breath:p})))))),l.a.createElement(i.a,null),l.a.createElement(N,null,l.a.createElement(c.a,{type:"flex",justify:"center",style:{marginTop:"-2vh"}},l.a.createElement(m.a,{style:{textAlign:"center"},span:22},l.a.createElement("p",{className:"tip"},"en"==this.state.lan?"United Dimensions Technologies Co., Ltd.":"\u8054\u5408\u7ef4\u5ea6\uff08\u5e7f\u5dde\uff09\u79d1\u6280\u6709\u9650\u516c\u53f8"))))))}}]),t}(n.Component);s.a.render(l.a.createElement(R,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.b682b77f.chunk.js.map